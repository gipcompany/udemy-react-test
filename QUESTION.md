# 頂いたご質問

```
動画に直接関連する質問ではなく、動画で学習しながら私用で作成しているreactについて質問させていただきたいのですが、

APIで取ってきた項目を編集する入力フォームを作成しているのですが、graphQLのクエリでAPIを呼び出し、取得した値をフォームの初期値に設定したいと思っています。

その場合、stateに代入してvalueに持たせるということを実現したいのですが、mapStatePropsを使用するとpropsに値が渡ってしまい、

他に方法が見つからずこちらで質問させていただきました。

動画でも使用されている、reduxFormを使用すると実現できますが、reduxFormを使用しながらmutationのタグを使用するとフォームが描画されず真っ白な画面になってしまいます。

ソースは下記のように記述しています。



動画と関係がないため、ご迷惑がかかる場合は削除させていただきます。

よろしくお願い致します。
```

まだ、ざっくりですが、ソースコードを拝見し気づいた点を書かせて頂きます。若干五月雨ですが複雑な問題のため以下ご確認頂き検討頂けますでしょうか。

* ApolloClientをお使いですが、こちらを利用する場合、キャッシュが有効となります。
* そのため、Redux側のstoreとの状態の冗長化が置きてしまい、今回のような不整合が発生してしまうため、ApolloClientとReduxは一緒には用いないというのが私の中での経験上のルールとしてあります。
* 下記リンクを張りますが、ReduxにはSingle source of truthという基本原則がありまして、状態は一元管理で持つ、という原則があります。その理由は、人間には複数の箇所に散らばる状態の管理は難しいとされているからです。
    https://redux.js.org/introduction/threeprinciples#single-source-of-truth
* また、reduxを使用する場合、いわゆるclass componentで所持できるstateを使用しないということも、Single source of truthという同じ理由からです。私のUdemyのコースでもReduxアプリケーションのフェーズではReactのstateは未使用です。
* というように、状態が3箇所で管理されているため、どれが正しい状態なのか、どれが一時的な状態なのか、ということをまずはキレイに定義する必要があります。
* とはいえ、やはりアプリケーションが正しく状態をもつようにするにはプログラマが気をつけるしか無い、というのははやり難しいところです。
* 色々書きましたが、今回のケースの場合、GraphQLによる外部リソースとの連携が必須となるため、私が個人的に考えるあるべき方針は、`Reduxを使わない。その代わり状態は全てclass のstateで賄う`ということになります。(別にこれが答えだ！といっているわけではなりません。)
* これを踏まえて、一度、Reduxによる状態管理をなくし、全て各コンポーネントで状態をもたせるよう、リファクタりんするのは如何でしょうか？
* ということになりますが、一度、この路線で検討されては如何でしょうか？

